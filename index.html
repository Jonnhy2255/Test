<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>BetSmart Pro</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0F172A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BetSmart Pro">
    <meta name="description" content="Analyses prédictives professionnelles pour les paris sportifs">
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAADECAMAAAD3eH5ZAAAABlBMVEVHcEz///+flKJDAAAAAXRSTlMAQObYZgAAAIlJREFUeAHt0EEBAAAEwDD8/2k66QF3BgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAM7uWJUuWLFmyZMmSJUuWLFmyZMmSJUuWLFmyZMmSJUuWLFmyZMmSJUuWrAMsS5YsWbJkyZIlS5YsWbJkyZIlS5YsWbJkyZIlS5YsWbJkyZIlS5YsWbI+sA4feexXGdQbhswAAAAASUVORK5CYII=">
    <link rel="manifest" href="data:application/manifest+json;base64,eyJuYW1lIjoiQmV0U21hcnQgUHJvIiwic2hvcnRfbmFtZSI6IkJldFNtYXJ0Iiwic3RhcnRfdXJsIjoiLyIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiMwRjE3MkEiLCJ0aGVtZV9jb2xvciI6IiMwRjE3MkEiLCJpY29ucyI6W3sic3JjIjoiaWNvbi5wbmciLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2UvcG5nIn1dfQ==">
</head>

<body class="dark">
    <!-- Application HTML Structure -->
    
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-logo">
            <div class="logo-bg"></div>
            <div class="logo-inner">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"></path>
                </svg>
            </div>
        </div>
        <h1 class="splash-title">BetSmart<span class="text-primary">Pro</span></h1>
        <p class="splash-subtitle">Analyses prédictives professionnelles</p>
        <div class="splash-progress-container">
            <div id="splash-progress" class="splash-progress-bar"></div>
        </div>
    </div>

    <!-- Login/Register Screen -->
    <div id="auth-screen" class="auth-screen hidden">
        <div class="auth-container">
            <div class="auth-logo">
                <div class="logo-bg"></div>
                <div class="logo-inner">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"></path>
                    </svg>
                </div>
            </div>
            <h2 class="auth-title">BetSmart<span class="text-primary">Pro</span></h2>
            
            <div id="login-form" class="auth-form">
                <h3 class="form-title">Connexion</h3>
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="votre@email.com" class="form-input">
                </div>
                <div class="form-group">
                    <label for="login-password">Mot de passe</label>
                    <input type="password" id="login-password" placeholder="Mot de passe" class="form-input">
                </div>
                <button id="login-button" class="btn btn-primary btn-block">Se connecter</button>
                <p class="auth-switch">Pas encore de compte? <a href="#" id="switch-to-register">S'inscrire</a></p>
            </div>
            
            <div id="register-form" class="auth-form hidden">
                <h3 class="form-title">Inscription</h3>
                <div class="form-group">
                    <label for="register-name">Nom complet</label>
                    <input type="text" id="register-name" placeholder="Votre nom" class="form-input">
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" placeholder="votre@email.com" class="form-input">
                </div>
                <div class="form-group">
                    <label for="register-password">Mot de passe</label>
                    <input type="password" id="register-password" placeholder="Au moins 8 caractères" class="form-input">
                </div>
                <button id="register-button" class="btn btn-primary btn-block">S'inscrire</button>
                <p class="auth-switch">Déjà un compte? <a href="#" id="switch-to-login">Se connecter</a></p>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="hidden">
        <!-- Header -->
        <header class="header ios-fixed-container">
            <div class="container">
                <div class="header-content">
                    <div class="header-logo">
                        <div class="logo-bg"></div>
                        <div class="logo-inner">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"></path>
                            </svg>
                        </div>
                    </div>
                    <h1 class="header-title">BetSmart<span class="text-primary">Pro</span></h1>
                    
                    <div class="header-actions">
                        <button id="btn-notifications" class="btn-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 01-3.46 0"></path>
                            </svg>
                            <span class="notification-badge"></span>
                        </button>
                        
                        <button id="btn-settings" class="btn-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path>
                            </svg>
                        </button>
                        
                        <div class="user-avatar">
                            <span class="avatar-text">MP</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- User Stats Bar -->
        <div class="stats-bar">
            <div class="container">
                <div class="stats-content">
                    <div class="stats-rank">
                        <div class="rank-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="8" r="7"></circle>
                                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                            </svg>
                        </div>
                        <div class="rank-info">
                            <div class="rank-title">
                                <span>Rang #42</span>
                                <span class="rank-change">+3</span>
                            </div>
                            <div class="rank-subtitle">Top 5% des pronostiqueurs</div>
                        </div>
                    </div>
                    
                    <div class="stats-metrics">
                        <div class="metric">
                            <div class="metric-value">187</div>
                            <div class="metric-label">Points</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">68%</div>
                            <div class="metric-label">Précision</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value-icon">
                                <span>3</span>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                </svg>
                            </div>
                            <div class="metric-label">Streak</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Tabs -->
        <div class="category-container">
            <div class="container">
                <div class="category-tabs">
                    <div class="category-tab active" data-category="all">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="18" x="3" y="3" rx="2"></rect>
                            <path d="M3 9h18"></path>
                            <path d="M9 21V9"></path>
                        </svg>
                        <span class="tab-text">Tous</span>
                    </div>
                    
                    <div class="category-tab" data-category="football">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"></path>
                        </svg>
                        <span class="tab-text">Football</span>
                    </div>
                    
                    <div class="category-tab" data-category="basketball">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M4.93 4.93C6.57 6.57 8.25 9.2 8.25 12s-1.68 5.43-3.32 7.07"></path>
                            <path d="M19.07 4.93C17.43 6.57 15.75 9.2 15.75 12s1.68 5.43 3.32 7.07"></path>
                            <path d="M2 12h20"></path>
                            <path d="M12 2a10 10 0 0 0 0 20"></path>
                        </svg>
                        <span class="tab-text">Basketball</span>
                    </div>
                    
                    <div class="category-tab" data-category="tennis">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 12c-1.95 0-3.57-1.4-3.5-3.36.06-1.6 1.4-2.84 3-2.84 1.5 0 2.7.96 3.22 2.3"></path>
                            <path d="M15.4 17c-1.5 0-2.7-.96-3.22-2.3"></path>
                            <path d="M12 12c1.95 0 3.57 1.4 3.5 3.36-.06 1.6-1.4 2.84-3 2.84"></path>
                            <path d="M9 9c-1.66 0-3 1.34-3 3s1.34 3 3 3"></path>
                        </svg>
                        <span class="tab-text">Tennis</span>
                    </div>
                    
                    <div class="category-tab" data-category="rugby">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path>
                            <path d="m14 7-4.5 4.5"></path>
                            <path d="m7 14 4.5-4.5"></path>
                            <path d="m9 17 8-8"></path>
                            <path d="M12 19c-4 0-7-3-7-7"></path>
                            <path d="M19 12c0 4-3 7-7 7"></path>
                        </svg>
                        <span class="tab-text">Rugby</span>
                    </div>
                    
                    <div class="category-tab" data-category="hockey">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 3v12"></path>
                            <path d="M3 15h18"></path>
                            <path d="M9 15v2"></path>
                            <path d="M15 15v2"></path>
                            <path d="M7 17h10"></path>
                            <path d="M8 13v-3a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v3"></path>
                        </svg>
                        <span class="tab-text">Hockey</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="container">
                <!-- Trending Section -->
                <section id="trending-section" class="content-section">
                    <div class="trending-card">
                        <div class="trending-overlay"></div>
                        <div class="trending-content">
                            <div class="trending-header">
                                <div class="trending-badge">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
                                        <path d="M3.22 12H9.5l.5-1 2 4 .5-2 2 2h5.27"></path>
                                    </svg>
                                    <span>TENDANCE</span>
                                </div>
                                <span class="trending-users">142 pronostiqueurs</span>
                            </div>
                            
                            <h3 class="trending-title">PSG - OM: Plus de 2.5 buts</h3>
                            <div class="trending-meta">
                                <span class="trending-odds">Cote 1.85</span>
                                <span class="meta-divider"></span>
                                <span class="trending-time">Aujourd'hui à 20:45</span>
                            </div>
                            
                            <div class="trending-footer">
                                <div class="trending-experts">
                                    <div class="expert-avatars">
                                        <div class="expert-avatar" style="background-color: #c4b5fd; color: #4c1d95;">TD</div>
                                        <div class="expert-avatar" style="background-color: #fbcfe8; color: #9d174d;">MR</div>
                                        <div class="expert-avatar" style="background-color: #a5f3fc; color: #0e7490;">JL</div>
                                    </div>
                                    <span class="experts-count">+12 experts suivent</span>
                                </div>
                                <button class="btn btn-light">Suivre</button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Today's Matches Section -->
                <section id="matches-section" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Matchs du Jour</h2>
                        <button class="btn-text">
                            Voir tout
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m9 18 6-6-6-6"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <div id="matches-container" class="matches-grid">
                        <!-- Match cards will be loaded by JavaScript -->
                    </div>
                </section>
                
                <!-- Expert Picks Section -->
                <section id="experts-section" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Analyses d'Experts</h2>
                        <button class="btn-text">
                            Voir tout
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m9 18 6-6-6-6"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <div id="experts-container" class="experts-grid">
                        <!-- Expert cards will be loaded by JavaScript -->
                    </div>
                </section>
                
                <!-- Leagues Section -->
                <section id="leagues-section" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Championnats Populaires</h2>
                    </div>
                    
                    <div class="leagues-scroll">
                        <div id="leagues-container" class="leagues-container">
                            <!-- League cards will be loaded by JavaScript -->
                        </div>
                    </div>
                </section>
            </div>
        </main>
        
        <!-- Bottom Tab Bar -->
        <nav class="tab-bar ios-fixed-container ios-bottom-padding">
            <div class="tab active" data-tab="safe">
                <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
                <span class="tab-text">Safe</span>
                <div class="tab-indicator"></div>
            </div>
            
            <div class="tab" data-tab="fun">
                <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                </svg>
                <span class="tab-text">Fun</span>
                <div class="tab-indicator"></div>
            </div>
            
            <div class="tab" data-tab="risk">
                <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
                <span class="tab-text">Risque</span>
                <div class="tab-indicator"></div>
            </div>
        </nav>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="settings-screen hidden">
        <div class="settings-header">
            <button id="close-settings" class="btn-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6L6 18"></path>
                    <path d="M6 6l12 12"></path>
                </svg>
            </button>
            <h2 class="settings-title">Paramètres</h2>
            <div class="settings-spacer"></div>
        </div>
        
        <div class="settings-container">
            <div class="settings-group">
                <h3 class="settings-group-title">Compte</h3>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">Profil</span>
                            <span class="settings-item-desc">Gérer vos informations personnelles</span>
                        </div>
                    </div>
                    <svg class="settings-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m9 18 6-6-6-6"></path>
                    </svg>
                </div>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">Sécurité</span>
                            <span class="settings-item-desc">Mot de passe et authentification</span>
                        </div>
                    </div>
                    <svg class="settings-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m9 18 6-6-6-6"></path>
                    </svg>
                </div>
            </div>
            
            <div class="settings-group">
                <h3 class="settings-group-title">Préférences</h3>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">Notifications</span>
                        </div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifications-toggle" checked>
                        <span class="switch-slider"></span>
                    </label>
                </div>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            <path d="M2 12h20"></path>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">Langue</span>
                        </div>
                    </div>
                    <div class="settings-value">Français</div>
                </div>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">Mode sombre</span>
                        </div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="dark-mode-toggle" checked>
                        <span class="switch-slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="settings-group">
                <h3 class="settings-group-title">Application</h3>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 16v-4"></path>
                            <path d="M12 8h.01"></path>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">À propos</span>
                            <span class="settings-item-desc">Version 1.0.0</span>
                        </div>
                    </div>
                    <svg class="settings-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m9 18 6-6-6-6"></path>
                    </svg>
                </div>
                
                <div class="settings-item">
                    <div class="settings-item-content">
                        <svg class="settings-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                            <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                            <line x1="6" y1="6" x2="6.01" y2="6"></line>
                            <line x1="6" y1="18" x2="6.01" y2="18"></line>
                        </svg>
                        <div class="settings-item-text">
                            <span class="settings-item-label">Données API</span>
                            <span class="settings-item-desc">Configurer l'accès à l'API</span>
                        </div>
                    </div>
                    <svg class="settings-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m9 18 6-6-6-6"></path>
                    </svg>
                </div>
            </div>
            
            <button id="logout-button" class="btn btn-danger btn-block mt-4">Se déconnecter</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <svg class="toast-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <span id="toast-message">Chargement des pronostics...</span>
    </div>

    <!-- Template for Match Card -->
    <template id="match-card-template">
        <div class="match-card">
            <div class="match-header">
                <div class="match-status">
                    <span class="status-indicator"></span>
                    <span class="status-text"></span>
                </div>
                <span class="match-time"></span>
            </div>
            
            <div class="match-teams">
                <div class="team home-team">
                    <div class="team-logo">
                        <span class="team-abbr"></span>
                    </div>
                    <span class="team-name"></span>
                </div>
                
                <div class="match-center">
                    <div class="match-score">
                        <span class="score-value">-</span>
                        <span class="score-separator">:</span>
                        <span class="score-value">-</span>
                    </div>
                    <div class="match-league"></div>
                </div>
                
                <div class="team away-team">
                    <div class="team-logo">
                        <span class="team-abbr"></span>
                    </div>
                    <span class="team-name"></span>
                </div>
            </div>
            
            <div class="match-predictions">
                <div class="prediction home-win">
                    <div class="prediction-header">
                        <div class="prediction-label-container">
                            <span class="prediction-color"></span>
                            <span class="prediction-label"></span>
                        </div>
                        <span class="prediction-value"></span>
                    </div>
                    <div class="prediction-bar-container">
                        <div class="prediction-bar"></div>
                    </div>
                </div>
                
                <div class="prediction draw">
                    <div class="prediction-header">
                        <div class="prediction-label-container">
                            <span class="prediction-color"></span>
                            <span class="prediction-label">Match nul</span>
                        </div>
                        <span class="prediction-value"></span>
                    </div>
                    <div class="prediction-bar-container">
                        <div class="prediction-bar"></div>
                    </div>
                </div>
                
                <div class="prediction away-win">
                    <div class="prediction-header">
                        <div class="prediction-label-container">
                            <span class="prediction-color"></span>
                            <span class="prediction-label"></span>
                        </div>
                        <span class="prediction-value"></span>
                    </div>
                    <div class="prediction-bar-container">
                        <div class="prediction-bar"></div>
                    </div>
                </div>
            </div>
            
            <div class="match-options">
                <div class="match-rating">
                    <div class="rating-stars">
                        <svg class="star" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                        <svg class="star" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                        <svg class="star" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                    </div>
                </div>
                <div class="match-actions">
                    <button class="btn-icon-small">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
                        </svg>
                    </button>
                    <button class="btn-icon-small">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="18" cy="5" r="3"></circle>
                            <circle cx="6" cy="12" r="3"></circle>
                            <circle cx="18" cy="19" r="3"></circle>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                        </svg>
                    </button>
                </div>
            </div>
            
            <button class="btn btn-primary btn-block">Analyser</button>
        </div>
    </template>

    <!-- Template for Expert Card -->
    <template id="expert-card-template">
        <div class="expert-card">
            <div class="expert-header">
                <div class="expert-info">
                    <div class="expert-avatar-container">
                        <div class="expert-avatar"></div>
                        <div class="expert-status"></div>
                    </div>
                    <div class="expert-details">
                        <h3 class="expert-name"></h3>
                        <p class="expert-title"></p>
                    </div>
                </div>
                <div class="expert-success"></div>
            </div>
            
            <div class="expert-pick">
                <div class="pick-match">
                    <div class="pick-title"></div>
                    <div class="pick-odds"></div>
                </div>
                <div class="pick-meta"></div>
                <p class="pick-analysis"></p>
                
                <div class="pick-confidence">
                    <div class="confidence-header">
                        <span class="confidence-label">Confiance</span>
                        <span class="confidence-value"></span>
                    </div>
                    <div class="confidence-bar-container">
                        <div class="confidence-bar"></div>
                    </div>
                </div>
            </div>
            
            <div class="expert-stats">
                <div class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span class="stat-value followers"></span>
                </div>
                <div class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                    </svg>
                    <span class="stat-value comments"></span>
                </div>
                <div class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                    <span class="stat-value shares"></span>
                </div>
            </div>
            
            <button class="btn btn-follow"></button>
        </div>
    </template>

    <!-- Template for League Card -->
    <template id="league-card-template">
        <div class="league-card">
            <div class="league-logo">
                <span class="league-abbr"></span>
            </div>
            <h3 class="league-name"></h3>
            <p class="league-country"></p>
            <div class="league-matches">
                <span class="matches-count"></span> matchs
            </div>
        </div>
    </template>

    <style>
        /* ============= GLOBAL STYLES ============= */
        :root {
            /* Colors */
            --color-primary: #8b5cf6;
            --color-primary-light: #a78bfa;
            --color-primary-dark: #7c3aed;
            --color-safe: #10b981;
            --color-fun: #f97316;
            --color-risk: #ef4444;
            --color-light: #f9fafb;
            --color-dark: #0F1117;
            --color-gray-50: #f9fafb;
            --color-gray-100: #f3f4f6;
            --color-gray-200: #e5e7eb;
            --color-gray-300: #d1d5db;
            --color-gray-400: #9ca3af;
            --color-gray-500: #6b7280;
            --color-gray-600: #4b5563;
            --color-gray-700: #374151;
            --color-gray-800: #1f2937;
            --color-gray-900: #111827;
            
            /* Light Theme Colors */
            --bg-body: var(--color-light);
            --bg-card: white;
            --bg-input: white;
            --text-primary: var(--color-gray-900);
            --text-secondary: var(--color-gray-600);
            --text-tertiary: var(--color-gray-500);
            --border-color: var(--color-gray-200);
            
            /* Spacing */
            --spacing-xs: 0.25rem;  /* 4px */
            --spacing-sm: 0.5rem;   /* 8px */
            --spacing-md: 0.75rem;  /* 12px */
            --spacing-base: 1rem;   /* 16px */
            --spacing-lg: 1.25rem;  /* 20px */
            --spacing-xl: 1.5rem;   /* 24px */
            --spacing-2xl: 2rem;    /* 32px */
            
            /* Radius */
            --radius-sm: 0.25rem;   /* 4px */
            --radius-md: 0.5rem;    /* 8px */
            --radius-lg: 0.75rem;   /* 12px */
            --radius-xl: 1rem;      /* 16px */
            --radius-full: 9999px;
            
            /* Z-index */
            --z-toast: 1000;
            --z-modal: 900;
            --z-overlay: 800;
            --z-header: 100;
            --z-nav: 90;
        }
        
        /* Dark theme overrides */
        body.dark {
            --bg-body: var(--color-dark);
            --bg-card: var(--color-gray-800);
            --bg-input: var(--color-gray-800);
            --text-primary: var(--color-gray-50);
            --text-secondary: var(--color-gray-300);
            --text-tertiary: var(--color-gray-400);
            --border-color: var(--color-gray-700);
        }
        
        /* Reset styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            font-size: 16px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-text-size-adjust: 100%;
        }
        
        body {
            background-color: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 1rem;
            min-height: 100vh;
            width: 100%;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Safe area insets for iOS */
        @supports (padding-top: constant(safe-area-inset-top)) {
            body {
                padding-top: constant(safe-area-inset-top);
                padding-left: constant(safe-area-inset-left);
                padding-right: constant(safe-area-inset-right);
            }
            
            .ios-bottom-padding {
                padding-bottom: constant(safe-area-inset-bottom);
            }
        }
        
        @supports (padding-top: env(safe-area-inset-top)) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
            
            .ios-bottom-padding {
                padding-bottom: env(safe-area-inset-bottom);
            }
        }
        
        a {
            color: var(--color-primary);
            text-decoration: none;
        }
        
        button, input, select, textarea {
            font-family: inherit;
            font-size: inherit;
            color: inherit;
            line-height: inherit;
        }
        
        button {
            cursor: pointer;
            background: none;
            border: none;
        }
        
        img, svg {
            display: block;
            max-width: 100%;
        }
        
        /* Utility Classes */
        .container {
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding-left: var(--spacing-base);
            padding-right: var(--spacing-base);
        }
        
        .hidden {
            display: none !important;
        }
        
        .text-primary {
            color: var(--color-primary);
        }
        
        .mt-4 {
            margin-top: 1rem;
        }
        
        /* ============= COMPONENTS ============= */
        /* Splash Screen */
        .splash-screen {
            position: fixed;
            inset: 0;
            background-color: var(--color-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            transition: opacity 0.3s ease;
        }
        
        .splash-logo {
            width: 80px;
            height: 80px;
            position: relative;
            margin-bottom: var(--spacing-xl);
        }
        
        .logo-bg {
            position: absolute;
            inset: 0;
            border-radius: var(--radius-xl);
            background: linear-gradient(135deg, var(--color-primary-dark), var(--color-primary));
            animation: pulse 2s infinite;
        }
        
        .logo-inner {
            position: absolute;
            inset: 4px;
            border-radius: calc(var(--radius-xl) - 4px);
            background-color: var(--color-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary);
        }
        
        .splash-title {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }
        
        .splash-subtitle {
            color: var(--color-gray-400);
            font-size: 0.875rem;
            margin-bottom: var(--spacing-xl);
        }
        
        .splash-progress-container {
            width: 200px;
            height: 6px;
            background-color: var(--color-gray-800);
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .splash-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--color-primary-dark), var(--color-primary));
            border-radius: var(--radius-full);
            transition: width 0.05s linear;
        }
        
        /* Auth Screen */
        .auth-screen {
            position: fixed;
            inset: 0;
            background-color: var(--bg-body);
            z-index: var(--z-modal);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-base);
        }
        
        .auth-container {
            width: 100%;
            max-width: 400px;
            padding: var(--spacing-xl);
            background-color: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .auth-logo {
            width: 60px;
            height: 60px;
            position: relative;
            margin: 0 auto var(--spacing-xl);
        }
        
        .auth-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-2xl);
        }
        
        .auth-form {
            transition: opacity 0.3s ease;
        }
        
        .form-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xl);
            text-align: center;
        }
        
        .form-group {
            margin-bottom: var(--spacing-lg);
        }
        
        .form-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
            color: var(--text-secondary);
        }
        
        .form-input {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-base);
            background-color: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .auth-switch {
            margin-top: var(--spacing-lg);
            text-align: center;
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }
        
        /* Buttons */
        .btn {
            display: inline-block;
            padding: var(--spacing-md) var(--spacing-xl);
            font-weight: 500;
            border-radius: var(--radius-md);
            transition: background-color 0.2s ease, transform 0.2s ease;
            text-align: center;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-primary {
            background-color: var(--color-primary);
            color: white;
        }
        
        .btn-primary:active {
            background-color: var(--color-primary-dark);
        }
        
        .btn-light {
            background-color: white;
            color: var(--color-primary);
        }
        
        .btn-light:active {
            background-color: var(--color-gray-100);
        }
        
        .btn-danger {
            background-color: var(--color-risk);
            color: white;
        }
        
        .btn-danger:active {
            background-color: #b91c1c;
        }
        
        .btn-text {
            color: var(--color-primary);
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            align-items: center;
        }
        
        .btn-text svg {
            margin-left: var(--spacing-xs);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            color: var(--text-secondary);
            position: relative;
        }
        
        .btn-icon:active {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .btn-icon-small {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            color: var(--text-tertiary);
        }
        
        .btn-icon-small:active {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--text-secondary);
        }
        
        .btn-follow {
            color: var(--color-primary);
            font-weight: 500;
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background-color: var(--color-risk);
            border-radius: var(--radius-full);
        }
        
        /* Switches */
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--color-gray-300);
            transition: 0.3s;
            border-radius: var(--radius-full);
        }
        
        .switch-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        input:checked + .switch-slider {
            background-color: var(--color-primary);
        }
        
        input:checked + .switch-slider:before {
            transform: translateX(20px);
        }
        
        /* Header */
        .header {
            height: 60px;
            top: 0;
            z-index: var(--z-header);
            background-color: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
        }
        
        .header-content {
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        .header-logo {
            width: 36px;
            height: 36px;
            position: relative;
            margin-right: var(--spacing-sm);
        }
        
        .header-title {
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .header-actions {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--color-primary-dark), var(--color-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        /* Stats Bar */
        .stats-bar {
            background-color: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            padding: var(--spacing-md) 0;
            margin-top: 60px;
        }
        
        .stats-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .stats-rank {
            display: flex;
            align-items: center;
        }
        
        .rank-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background-color: rgba(139, 92, 246, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary);
            margin-right: var(--spacing-md);
        }
        
        .rank-title {
            display: flex;
            align-items: center;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .rank-change {
            margin-left: var(--spacing-xs);
            padding: 2px 4px;
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--color-safe);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
        }
        
        .rank-subtitle {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }
        
        .stats-metrics {
            display: flex;
            gap: var(--spacing-xl);
        }
        
        .metric {
            text-align: center;
        }
        
        .metric-value {
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .metric-value-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .metric-value-icon svg {
            margin-left: 2px;
            color: var(--color-fun);
        }
        
        .metric-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }
        
        /* Category Tabs */
        .category-container {
            background-color: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .category-tabs {
            display: flex;
            padding: var(--spacing-md) 0;
            min-width: min-content;
        }
        
        .category-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-md) var(--spacing-lg);
            min-width: 80px;
            color: var(--text-tertiary);
            position: relative;
        }
        
        .category-tab.active {
            color: var(--color-primary);
        }
        
        .tab-icon {
            width: 24px;
            height: 24px;
            margin-bottom: var(--spacing-xs);
        }
        
        .tab-text {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* Tab Bar */
        .tab-bar {
            height: 60px;
            bottom: 0;
            z-index: var(--z-nav);
            background-color: var(--bg-card);
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
        
        .tab {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-tertiary);
            position: relative;
        }
        
        .tab.active {
            color: var(--color-primary);
        }
        
        .tab-icon {
            width: 24px;
            height: 24px;
            margin-bottom: var(--spacing-xs);
        }
        
        .tab-indicator {
            position: absolute;
            bottom: 0;
            height: 3px;
            width: 24px;
            background-color: var(--color-primary);
            border-radius: 3px 3px 0 0;
            display: none;
        }
        
        .tab.active .tab-indicator {
            display: block;
        }
        
        /* Main Content */
        .main-content {
            padding-bottom: 80px;
        }
        
        .content-section {
            margin-bottom: var(--spacing-xl);
        }
        
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-base);
        }
        
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        /* Trending Card */
        .trending-card {
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
            margin-bottom: var(--spacing-lg);
        }
        
        .trending-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--color-primary-dark), var(--color-primary));
            opacity: 0.85;
        }
        
        .trending-content {
            position: relative;
            padding: var(--spacing-xl);
            color: white;
        }
        
        .trending-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .trending-badge {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background-color: rgba(255, 255, 255, 0.2);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-full);
            font-weight: 500;
            font-size: 0.75rem;
        }
        
        .trending-users {
            background-color: rgba(255, 255, 255, 0.2);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-full);
            font-size: 0.75rem;
        }
        
        .trending-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }
        
        .trending-meta {
            display: flex;
            align-items: center;
            font-size: 0.875rem;
            margin-bottom: var(--spacing-lg);
            opacity: 0.9;
        }
        
        .trending-odds {
            font-weight: 500;
        }
        
        .meta-divider {
            width: 4px;
            height: 4px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: var(--radius-full);
            margin: 0 var(--spacing-md);
        }
        
        .trending-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .trending-experts {
            display: flex;
            align-items: center;
        }
        
        .expert-avatars {
            display: flex;
            margin-right: var(--spacing-md);
        }
        
        .expert-avatar {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            border: 2px solid white;
            margin-right: -8px;
        }
        
        .experts-count {
            font-size: 0.75rem;
            opacity: 0.9;
        }
        
        /* Match Card */
        .matches-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-base);
        }
        
        @media (min-width: 640px) {
            .matches-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .match-card {
            background-color: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-base);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .match-status {
            display: flex;
            align-items: center;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
            margin-right: var(--spacing-xs);
        }
        
        .status-indicator.upcoming {
            background-color: var(--color-safe);
        }
        
        .status-indicator.live {
            background-color: var(--color-risk);
            animation: pulse 2s infinite;
        }
        
        .status-indicator.completed {
            background-color: var(--color-gray-500);
        }
        
        .status-text {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .match-time {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }
        
        .match-teams {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-base);
        }
        
        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 30%;
        }
        
        .team-logo {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            margin-bottom: var(--spacing-xs);
        }
        
        .team-name {
            font-size: 0.875rem;
            font-weight: 500;
            text-align: center;
        }
        
        .match-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 40%;
        }
        
        .match-score {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-xs);
        }
        
        .score-value {
            font-size: 1.5rem;
            font-weight: 700;
            min-width: 24px;
            text-align: center;
        }
        
        .score-separator {
            margin: 0 var(--spacing-xs);
            color: var(--text-tertiary);
        }
        
        .match-league {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            padding: var(--spacing-xs) var(--spacing-md);
            background-color: var(--color-gray-100);
            border-radius: var(--radius-sm);
        }
        
        .match-predictions {
            margin-bottom: var(--spacing-base);
        }
        
        .prediction {
            margin-bottom: var(--spacing-md);
        }
        
        .prediction:last-child {
            margin-bottom: 0;
        }
        
        .prediction-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xs);
        }
        
        .prediction-label-container {
            display: flex;
            align-items: center;
        }
        
        .prediction-color {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
            margin-right: var(--spacing-xs);
        }
        
        .home-win .prediction-color {
            background-color: var(--color-primary);
        }
        
        .draw .prediction-color {
            background-color: var(--color-fun);
        }
        
        .away-win .prediction-color {
            background-color: var(--color-risk);
        }
        
        .prediction-label {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .prediction-value {
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .prediction-bar-container {
            width: 100%;
            height: 6px;
            background-color: var(--color-gray-100);
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .prediction-bar {
            height: 100%;
            border-radius: var(--radius-full);
            width: 0;
            transition: width 1s ease-out;
        }
        
        .home-win .prediction-bar {
            background-color: var(--color-primary);
        }
        
        .draw .prediction-bar {
            background-color: var(--color-fun);
        }
        
        .away-win .prediction-bar {
            background-color: var(--color-risk);
        }
        
        .match-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-base);
        }
        
        .rating-stars {
            display: flex;
            align-items: center;
            color: var(--color-primary);
        }
        
        .star {
            margin-right: 2px;
        }
        
        .match-actions {
            display: flex;
            gap: var(--spacing-xs);
        }
        
        /* Expert Card */
        .experts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-base);
        }
        
        @media (min-width: 640px) {
            .experts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .expert-card {
            background-color: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-base);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .expert-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-base);
        }
        
        .expert-info {
            display: flex;
            align-items: flex-start;
        }
        
        .expert-avatar-container {
            position: relative;
            margin-right: var(--spacing-md);
        }
        
        .expert-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            color: white;
        }
        
        .expert-status {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
            background-color: var(--color-safe);
            border-radius: var(--radius-full);
            border: 2px solid var(--bg-card);
        }
        
        .expert-details {
            flex: 1;
        }
        
        .expert-name {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .expert-title {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin: 0;
        }
        
        .expert-success {
            display: flex;
            align-items: center;
            padding: var(--spacing-xs) var(--spacing-sm);
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--color-safe);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .expert-pick {
            background-color: var(--color-gray-50);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-base);
        }
        
        .pick-match {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-xs);
        }
        
        .pick-title {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .pick-odds {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-safe);
        }
        
        .pick-meta {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-bottom: var(--spacing-sm);
        }
        
        .pick-analysis {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-md);
        }
        
        .confidence-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xs);
        }
        
        .confidence-label {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .confidence-value {
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .confidence-bar-container {
            width: 100%;
            height: 6px;
            background-color: var(--color-gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .confidence-bar {
            height: 100%;
            border-radius: var(--radius-full);
            width: 0;
            background-color: var(--color-primary);
            transition: width 1s ease-out;
        }
        
        .expert-stats {
            display: flex;
            justify-content: flex-start;
            margin-bottom: var(--spacing-base);
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            color: var(--text-tertiary);
            font-size: 0.75rem;
            margin-right: var(--spacing-lg);
        }
        
        .stat-item svg {
            margin-right: var(--spacing-xs);
        }
        
        /* League Cards */
        .leagues-scroll {
            overflow-x: auto;
            padding-bottom: var(--spacing-sm);
            -webkit-overflow-scrolling: touch;
        }
        
        .leagues-container {
            display: flex;
            gap: var(--spacing-md);
        }
        
        .league-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--spacing-md);
            background-color: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            min-width: 120px;
        }
        
        .league-logo {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }
        
        .league-name {
            font-size: 0.875rem;
            font-weight: 500;
            text-align: center;
            margin-bottom: 2px;
        }
        
        .league-country {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-bottom: var(--spacing-xs);
        }
        
        .league-matches {
            font-size: 0.75rem;
            color: var(--text-secondary);
            background-color: var(--color-gray-100);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-full);
        }
        
        /* Settings Screen */
        .settings-screen {
            position: fixed;
            inset: 0;
            background-color: var(--bg-body);
            z-index: var(--z-modal);
            display: flex;
            flex-direction: column;
        }
        
        .settings-header {
            height: 60px;
            padding: 0 var(--spacing-base);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-card);
        }
        
        .settings-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .settings-spacer {
            width: 24px;
        }
        
        .settings-container {
            flex: 1;
            padding: var(--spacing-base);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .settings-group {
            margin-bottom: var(--spacing-xl);
        }
        
        .settings-group-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-tertiary);
            margin-bottom: var(--spacing-sm);
            padding-left: var(--spacing-xs);
        }
        
        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md) var(--spacing-xs);
            border-bottom: 1px solid var(--border-color);
        }
        
        .settings-item:last-child {
            border-bottom: none;
        }
        
        .settings-item-content {
            display: flex;
            align-items: center;
        }
        
        .settings-icon {
            color: var(--text-tertiary);
            margin-right: var(--spacing-md);
        }
        
        .settings-item-text {
            flex: 1;
        }
        
        .settings-item-label {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .settings-item-desc {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }
        
        .settings-arrow {
            color: var(--text-tertiary);
        }
        
        .settings-value {
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--color-gray-800);
            color: white;
            padding: var(--spacing-md) var(--spacing-base);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: var(--z-toast);
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 80%;
        }
        
        .toast-icon {
            color: var(--color-primary-light);
            margin-right: var(--spacing-sm);
        }
        
        /* Animations */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease forwards;
        }
        
        .animate-slide-up {
            animation: slideUp 0.3s ease forwards;
        }
    </style>

    <script>
        // ==================== UTILITY FUNCTIONS ==================== //
        
        // Check if a device is iOS
        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }
        
        // Polyfill for Element.prototype.closest (for iOS 12)
        if (!Element.prototype.closest) {
            Element.prototype.closest = function(s) {
                let el = this;
                if (!document.documentElement.contains(el)) return null;
                do {
                    if (el.matches(s)) return el;
                    el = el.parentElement || el.parentNode;
                } while (el !== null && el.nodeType === 1);
                return null;
            };
        }
        
        // Show toast notification
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            if (!toast || !toastMessage) return;
            
            toastMessage.textContent = message;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 300);
            }, duration);
        }
        
        // Format a date to a readable string
        function formatDate(date) {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const isToday = date.toDateString() === today.toDateString();
            const isTomorrow = date.toDateString() === tomorrow.toDateString();
            
            if (isToday) {
                return "Aujourd'hui " + date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            } else if (isTomorrow) {
                return "Demain " + date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            } else {
                return date.toLocaleDateString('fr-FR', { day: '2-digit', month: '2-digit' }) + ' ' + 
                       date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            }
        }
        
        // Deep clone an object
        function deepClone(obj) {
            return JSON.parse(JSON.stringify(obj));
        }
        
        // ==================== DATA MODELS ==================== //
        
        // Global application state
        const appState = {
            currentUser: null,
            currentTab: 'safe',
            currentCategory: 'all',
            matches: [],
            experts: [],
            leagues: [],
            settings: {
                darkMode: true,
                notifications: true,
                language: 'fr'
            }
        };
        
        // Predefined league colors
        const leagueColors = {
            'L1': '#001e62',  // Ligue 1
            'PL': '#3d185c',  // Premier League
            'LL': '#ee8707',  // La Liga
            'SA': '#008c45',  // Serie A
            'BL': '#d20515',  // Bundesliga
            'CL': '#0e1e5b',  // Champions League
            'EL': '#f68e00',  // Europa League
            'NL': '#ff6900',  // Nations League
            'WC': '#7e0021'   // World Cup
        };
        
        // ==================== FOOTBALL API INTEGRATION ==================== //
        
        // Football API client
        const footballApi = {
            apiKey: '',
            baseUrl: 'https://football-api.example.com',
            
            // Set API credentials
            setCredentials(apiKey) {
                this.apiKey = apiKey;
                localStorage.setItem('footballApiKey', apiKey);
                return this.testConnection();
            },
            
            // Test API connection
            async testConnection() {
                try {
                    const response = await this.fetchEndpoint('/status');
                    return response.status === 'ok';
                } catch (error) {
                    console.error('API connection test failed:', error);
                    return false;
                }
            },
            
            // Generic fetch method for API endpoints
            async fetchEndpoint(endpoint, params = {}) {
                if (!this.apiKey) {
                    throw new Error('API key not set. Call setCredentials first.');
                }
                
                const url = new URL(this.baseUrl + endpoint);
                Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));
                
                const headers = {
                    'Authorization': `Bearer ${this.apiKey}`,
                    'Content-Type': 'application/json'
                };
                
                try {
                    const response = await fetch(url.toString(), { headers });
                    if (!response.ok) {
                        throw new Error(`API error: ${response.status} ${response.statusText}`);
                    }
                    return await response.json();
                } catch (error) {
                    console.error(`Error fetching ${endpoint}:`, error);
                    throw error;
                }
            },
            
            // Get matches for a specific date range
            async getMatches(dateFrom, dateTo, leagueId = null) {
                const params = {
                    dateFrom: dateFrom.toISOString().split('T')[0],
                    dateTo: dateTo.toISOString().split('T')[0]
                };
                
                if (leagueId) {
                    params.league = leagueId;
                }
                
                try {
                    return await this.fetchEndpoint('/matches', params);
                } catch (error) {
                    // Fallback to mock data if API fails
                    console.warn('Using mock match data due to API error');
                    return this.getMockMatches();
                }
            },
            
            // Get match details by ID
            async getMatchDetails(matchId) {
                try {
                    return await this.fetchEndpoint(`/matches/${matchId}`);
                } catch (error) {
                    // Fallback to mock data if API fails
                    console.warn('Using mock match details due to API error');
                    return this.getMockMatchDetails(matchId);
                }
            },
            
            // Get leagues
            async getLeagues() {
                try {
                    return await this.fetchEndpoint('/leagues');
                } catch (error) {
                    // Fallback to mock data if API fails
                    console.warn('Using mock league data due to API error');
                    return this.getMockLeagues();
                }
            },
            
            // Get predictions for a match
            async getPredictions(matchId) {
                try {
                    return await this.fetchEndpoint(`/predictions/${matchId}`);
                } catch (error) {
                    // Fallback to mock data if API fails
                    console.warn('Using mock prediction data due to API error');
                    return this.getMockPredictions(matchId);
                }
            },
            
            // ===== MOCK DATA METHODS ===== //
            
            // These methods provide mock data when the actual API is not available
            getMockMatches() {
                // Sample match data based on the current tab
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                let matches = [];
                
                // Different number of matches based on category
                const matchCounts = {
                    'safe': 1,
                    'fun': 2,
                    'risk': 3
                };
                
                const mockLeagues = this.getMockLeagues();
                
                mockLeagues.forEach(league => {
                    const count = matchCounts[appState.currentTab] || 1;
                    
                    for (let i = 0; i < count; i++) {
                        const matchDate = i % 2 === 0 ? today : tomorrow;
                        matchDate.setHours(19 + Math.floor(Math.random() * 3), Math.floor(Math.random() * 4) * 15);
                        
                        matches.push({
                            id: `${league.id}-${i}`,
                            status: 'upcoming',
                            date: matchDate.toISOString(),
                            league: {
                                id: league.id,
                                name: league.name,
                                country: league.country,
                                logo: league.logo
                            },
                            teams: {
                                home: {
                                    id: `home-${league.id}-${i}`,
                                    name: `${league.country} FC`,
                                    shortName: league.id === 'L1' ? 'PSG' : (league.id === 'PL' ? 'MCI' : `${league.id}H`),
                                    logo: null
                                },
                                away: {
                                    id: `away-${league.id}-${i}`,
                                    name: `${league.country} United`,
                                    shortName: league.id === 'L1' ? 'OM' : (league.id === 'PL' ? 'MUN' : `${league.id}A`),
                                    logo: null
                                }
                            },
                            scores: {
                                home: null,
                                away: null
                            }
                        });
                    }
                });
                
                return matches;
            },
            
            getMockMatchDetails(matchId) {
                const matches = this.getMockMatches();
                const match = matches.find(m => m.id === matchId);
                
                if (!match) {
                    return null;
                }
                
                // Add extra details to the match
                return {
                    ...match,
                    venue: {
                        name: 'Stade Example',
                        city: 'Paris',
                        capacity: 60000
                    },
                    statistics: {
                        possession: {
                            home: 55,
                            away: 45
                        },
                        shots: {
                            home: 12,
                            away: 8
                        },
                        shotsOnTarget: {
                            home: 5,
                            away: 3
                        }
                    }
                };
            },
            
            getMockLeagues() {
                return [
                    { id: 'L1', name: 'Ligue 1', country: 'France', logo: null },
                    { id: 'PL', name: 'Premier League', country: 'Angleterre', logo: null },
                    { id: 'LL', name: 'La Liga', country: 'Espagne', logo: null },
                    { id: 'SA', name: 'Serie A', country: 'Italie', logo: null },
                    { id: 'BL', name: 'Bundesliga', country: 'Allemagne', logo: null },
                    { id: 'CL', name: 'Champions League', country: 'Europe', logo: null }
                ];
            },
            
            getMockPredictions(matchId) {
                // Generate random predictions based on the match tab
                let homeWin, draw, awayWin;
                
                switch(appState.currentTab) {
                    case 'safe':
                        homeWin = 65 + Math.floor(Math.random() * 10);
                        draw = Math.floor(Math.random() * 20);
                        awayWin = 100 - homeWin - draw;
                        break;
                    case 'fun':
                        homeWin = 40 + Math.floor(Math.random() * 15);
                        draw = 30 + Math.floor(Math.random() * 10);
                        awayWin = 100 - homeWin - draw;
                        break;
                    case 'risk':
                        homeWin = 30 + Math.floor(Math.random() * 15);
                        awayWin = 30 + Math.floor(Math.random() * 15);
                        draw = 100 - homeWin - awayWin;
                        break;
                    default:
                        homeWin = 50;
                        draw = 25;
                        awayWin = 25;
                }
                
                return {
                    matchId,
                    predictions: {
                        homeWin,
                        draw,
                        awayWin
                    },
                    confidence: Math.floor(Math.random() * 30) + 70,
                    form: {
                        home: ['W', 'W', 'D', 'L', 'W'],
                        away: ['L', 'W', 'W', 'D', 'L']
                    }
                };
            },
            
            getMockExperts() {
                return [
                    {
                        id: 1,
                        name: 'Thomas Deleuze',
                        title: 'Expert Ligue 1',
                        avatar: 'TD',
                        avatarColor: '#8b5cf6',
                        online: true,
                        successRate: 72,
                        followers: 152,
                        comments: 24,
                        shares: 37,
                        isFollowing: false,
                        pick: {
                            title: 'PSG vs OM: Plus de 2.5 buts',
                            odds: 1.85,
                            meta: "Aujourd'hui 20:45 • Ligue 1",
                            analysis: "Les rencontres entre le PSG et l'OM sont généralement riches en buts. Lors des 5 derniers matchs entre ces deux équipes, la moyenne est de 3.4 buts par match.",
                            confidence: 80
                        }
                    },
                    {
                        id: 2,
                        name: 'Maria Rodriguez',
                        title: 'Expert Champions League',
                        avatar: 'MR',
                        avatarColor: '#ec4899',
                        online: true,
                        successRate: 68,
                        followers: 324,
                        comments: 42,
                        shares: 56,
                        isFollowing: false,
                        pick: {
                            title: 'Bayern vs Barça: Les deux équipes marquent',
                            odds: 1.65,
                            meta: "Aujourd'hui 21:00 • Champions League",
                            analysis: "Bayern et Barcelone ont deux des attaques les plus prolifiques d'Europe. Lors des 8 dernières confrontations, les deux équipes ont marqué dans 7 matchs.",
                            confidence: 75
                        }
                    }
                ];
            }
        };
        
        // ==================== UI MANAGEMENT ==================== //
        
        // UI Controller module
        const UI = {
            // Initialize the UI
            init() {
                // Initialize the splash screen
                this.initSplashScreen();
                
                // Retrieve stored API key if available
                const storedApiKey = localStorage.getItem('footballApiKey');
                if (storedApiKey) {
                    footballApi.apiKey = storedApiKey;
                }
                
                // Check for stored authentication
                const storedUser = localStorage.getItem('currentUser');
                if (storedUser) {
                    try {
                        appState.currentUser = JSON.parse(storedUser);
                        this.showMainApp();
                    } catch (error) {
                        this.showAuthScreen();
                    }
                } else {
                    this.showAuthScreen();
                }
                
                // Initialize event listeners
                this.initEventListeners();
            },
            
            // Initialize the splash screen and loading animation
            initSplashScreen() {
                const progressBar = document.getElementById('splash-progress');
                if (!progressBar) return;
                
                let width = 0;
                const interval = setInterval(() => {
                    width += 1;
                    progressBar.style.width = `${width}%`;
                    
                    if (width >= 100) {
                        clearInterval(interval);
                        
                        // Keep splash visible a bit longer
                        setTimeout(() => {
                            const splashScreen = document.getElementById('splash-screen');
                            if (splashScreen) {
                                splashScreen.style.opacity = '0';
                                setTimeout(() => {
                                    splashScreen.classList.add('hidden');
                                }, 300);
                            }
                        }, 500);
                    }
                }, 20);
            },
            
            // Show the authentication screen
            showAuthScreen() {
                const authScreen = document.getElementById('auth-screen');
                const app = document.getElementById('app');
                
                if (authScreen && app) {
                    authScreen.classList.remove('hidden');
                    app.classList.add('hidden');
                }
            },
            
            // Show the main application
            showMainApp() {
                const authScreen = document.getElementById('auth-screen');
                const app = document.getElementById('app');
                
                if (authScreen && app) {
                    authScreen.classList.add('hidden');
                    app.classList.remove('hidden');
                    
                    // Load initial data
                    this.loadData();
                }
            },
            
            // Show the settings screen
            showSettingsScreen() {
                const settingsScreen = document.getElementById('settings-screen');
                if (settingsScreen) {
                    settingsScreen.classList.remove('hidden');
                }
            },
            
            // Hide the settings screen
            hideSettingsScreen() {
                const settingsScreen = document.getElementById('settings-screen');
                if (settingsScreen) {
                    settingsScreen.classList.add('hidden');
                }
            },
            
            // Initialize all event listeners
            initEventListeners() {
                // Auth screen event listeners
                document.getElementById('switch-to-register')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('login-form')?.classList.add('hidden');
                    document.getElementById('register-form')?.classList.remove('hidden');
                });
                
                document.getElementById('switch-to-login')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('register-form')?.classList.add('hidden');
                    document.getElementById('login-form')?.classList.remove('hidden');
                });
                
                document.getElementById('login-button')?.addEventListener('click', () => {
                    const email = document.getElementById('login-email').value;
                    const password = document.getElementById('login-password').value;
                    
                    if (email && password) {
                        // For demo purposes, allow any valid email/password
                        appState.currentUser = {
                            id: 1,
                            name: email.split('@')[0],
                            email: email
                        };
                        
                        localStorage.setItem('currentUser', JSON.stringify(appState.currentUser));
                        this.showMainApp();
                    } else {
                        showToast('Veuillez remplir tous les champs');
                    }
                });
                
                document.getElementById('register-button')?.addEventListener('click', () => {
                    const name = document.getElementById('register-name').value;
                    const email = document.getElementById('register-email').value;
                    const password = document.getElementById('register-password').value;
                    
                    if (name && email && password) {
                        // For demo purposes, register any valid input
                        appState.currentUser = {
                            id: 1,
                            name: name,
                            email: email
                        };
                        
                        localStorage.setItem('currentUser', JSON.stringify(appState.currentUser));
                        this.showMainApp();
                    } else {
                        showToast('Veuillez remplir tous les champs');
                    }
                });
                
                // Category tabs event listeners
                const categoryTabs = document.querySelectorAll('.category-tab');
                categoryTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        categoryTabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        const category = tab.getAttribute('data-category');
                        appState.currentCategory = category;
                        
                        showToast(`Chargement des matchs ${category}`);
                        this.loadData();
                    });
                });
                
                // Bottom tabs event listeners
                const tabs = document.querySelectorAll('.tab');
                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        const tabType = tab.getAttribute('data-tab');
                        appState.currentTab = tabType;
                        
                        showToast(`Chargement des pronostics ${tabType}`);
                        this.loadData();
                    });
                });
                
                // Settings event listeners
                document.getElementById('btn-settings')?.addEventListener('click', () => {
                    this.showSettingsScreen();
                });
                
                document.getElementById('close-settings')?.addEventListener('click', () => {
                    this.hideSettingsScreen();
                });
                
                document.getElementById('dark-mode-toggle')?.addEventListener('change', (e) => {
                    appState.settings.darkMode = e.target.checked;
                    this.applyDarkMode();
                    localStorage.setItem('settings', JSON.stringify(appState.settings));
                });
                
                document.getElementById('notifications-toggle')?.addEventListener('change', (e) => {
                    appState.settings.notifications = e.target.checked;
                    localStorage.setItem('settings', JSON.stringify(appState.settings));
                });
                
                document.getElementById('logout-button')?.addEventListener('click', () => {
                    localStorage.removeItem('currentUser');
                    appState.currentUser = null;
                    this.hideSettingsScreen();
                    this.showAuthScreen();
                });
            },
            
            // Apply dark mode based on settings
            applyDarkMode() {
                if (appState.settings.darkMode) {
                    document.body.classList.add('dark');
                } else {
                    document.body.classList.remove('dark');
                }
            },
            
            // Load all data for the current view
            loadData() {
                // Load matches
                this.loadMatches();
                
                // Load experts
                this.loadExperts();
                
                // Load leagues
                this.loadLeagues();
            },
            
            // Load matches data
            async loadMatches() {
                const matchesContainer = document.getElementById('matches-container');
                if (!matchesContainer) return;
                
                // Show loading state
                matchesContainer.innerHTML = `
                    <div class="match-card" style="display: flex; justify-content: center; align-items: center; height: 150px;">
                        <div style="text-align: center;">
                            <div style="margin-bottom: 8px;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto;">
                                    <line x1="12" y1="2" x2="12" y2="6"></line>
                                    <line x1="12" y1="18" x2="12" y2="22"></line>
                                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                    <line x1="2" y1="12" x2="6" y2="12"></line>
                                    <line x1="18" y1="12" x2="22" y2="12"></line>
                                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                </svg>
                            </div>
                            <span>Chargement des matchs...</span>
                        </div>
                    </div>
                `;
                
                try {
                    // Get today and tomorrow dates
                    const today = new Date();
                    const nextWeek = new Date(today);
                    nextWeek.setDate(nextWeek.getDate() + 7);
                    
                    // Fetch matches from API
                    const matches = await footballApi.getMatches(today, nextWeek);
                    appState.matches = matches;
                    
                    // Render matches
                    this.renderMatches();
                } catch (error) {
                    console.error('Error loading matches:', error);
                    matchesContainer.innerHTML = `
                        <div class="match-card">
                            <div style="text-align: center; padding: 20px;">
                                <p>Erreur lors du chargement des matchs.</p>
                                <button class="btn btn-primary mt-4" onclick="UI.loadData()">Réessayer</button>
                            </div>
                        </div>
                    `;
                }
            },
            
            // Render matches in the UI
            renderMatches() {
                const matchesContainer = document.getElementById('matches-container');
                if (!matchesContainer) return;
                
                matchesContainer.innerHTML = '';
                
                if (appState.matches.length === 0) {
                    matchesContainer.innerHTML = `
                        <div class="match-card">
                            <div style="text-align: center; padding: 20px;">
                                <p>Aucun match trouvé pour ces critères.</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                // Get match card template
                const template = document.getElementById('match-card-template');
                if (!template) return;
                
                // Render each match
                appState.matches.forEach((match, index) => {
                    const card = template.content.cloneNode(true);
                    
                    // Status and time
                    const statusIndicator = card.querySelector('.status-indicator');
                    const statusText = card.querySelector('.status-text');
                    const matchTime = card.querySelector('.match-time');
                    
                    statusIndicator.classList.add(match.status);
                    statusText.textContent = match.status === 'live' ? 'EN DIRECT' : match.status === 'upcoming' ? 'À VENIR' : 'TERMINÉ';
                    matchTime.textContent = formatDate(new Date(match.date));
                    
                    // Teams
                    const homeTeamName = card.querySelector('.home-team .team-name');
                    const homeTeamAbbr = card.querySelector('.home-team .team-abbr');
                    const homeTeamLogo = card.querySelector('.home-team .team-logo');
                    
                    const awayTeamName = card.querySelector('.away-team .team-name');
                    const awayTeamAbbr = card.querySelector('.away-team .team-abbr');
                    const awayTeamLogo = card.querySelector('.away-team .team-logo');
                    
                    homeTeamName.textContent = match.teams.home.name;
                    homeTeamAbbr.textContent = match.teams.home.shortName;
                    homeTeamLogo.style.backgroundColor = match.teams.home.color || leagueColors[match.league.id] || '#4338ca';
                    
                    awayTeamName.textContent = match.teams.away.name;
                    awayTeamAbbr.textContent = match.teams.away.shortName;
                    awayTeamLogo.style.backgroundColor = match.teams.away.color || leagueColors[match.league.id] || '#4338ca';
                    
                    // Score
                    const scoreValues = card.querySelectorAll('.score-value');
                    if (match.scores.home !== null && match.scores.away !== null) {
                        scoreValues[0].textContent = match.scores.home;
                        scoreValues[1].textContent = match.scores.away;
                    }
                    
                    // League
                    const matchLeague = card.querySelector('.match-league');
                    matchLeague.textContent = match.league.name;
                    
                    // Predictions
                    const predictions = footballApi.getMockPredictions(match.id).predictions;
                    
                    const homeWinLabel = card.querySelector('.home-win .prediction-label');
                    const homeWinValue = card.querySelector('.home-win .prediction-value');
                    const homeWinBar = card.querySelector('.home-win .prediction-bar');
                    
                    const drawValue = card.querySelector('.draw .prediction-value');
                    const drawBar = card.querySelector('.draw .prediction-bar');
                    
                    const awayWinLabel = card.querySelector('.away-win .prediction-label');
                    const awayWinValue = card.querySelector('.away-win .prediction-value');
                    const awayWinBar = card.querySelector('.away-win .prediction-bar');
                    
                    homeWinLabel.textContent = `Victoire ${match.teams.home.name}`;
                    homeWinValue.textContent = `${predictions.homeWin}%`;
                    homeWinBar.setAttribute('data-width', predictions.homeWin);
                    
                    drawValue.textContent = `${predictions.draw}%`;
                    drawBar.setAttribute('data-width', predictions.draw);
                    
                    awayWinLabel.textContent = `Victoire ${match.teams.away.name}`;
                    awayWinValue.textContent = `${predictions.awayWin}%`;
                    awayWinBar.setAttribute('data-width', predictions.awayWin);
                    
                    // Stars rating (based on current tab)
                    const stars = card.querySelectorAll('.rating-stars .star');
                    const maxStars = stars.length;
                    let visibleStars;
                    
                    switch(appState.currentTab) {
                        case 'safe': visibleStars = maxStars; break;
                        case 'fun': visibleStars = Math.floor(maxStars * 0.67); break;
                        case 'risk': visibleStars = Math.floor(maxStars * 0.33); break;
                        default: visibleStars = maxStars;
                    }
                    
                    stars.forEach((star, i) => {
                        if (i >= visibleStars) {
                            star.style.opacity = '0.3';
                        }
                    });
                    
                    // Add animation delay
                    const matchCard = card.querySelector('.match-card');
                    matchCard.style.animationDelay = `${index * 0.1}s`;
                    matchCard.classList.add('animate-slide-up');
                    
                    matchesContainer.appendChild(card);
                });
                
                // Animate prediction bars
                setTimeout(() => {
                    const predictionBars = document.querySelectorAll('.prediction-bar');
                    predictionBars.forEach(bar => {
                        const width = bar.getAttribute('data-width');
                        bar.style.width = `${width}%`;
                    });
                }, 500);
            },
            
            // Load experts data
            loadExperts() {
                const expertsContainer = document.getElementById('experts-container');
                if (!expertsContainer) return;
                
                // Show loading state
                expertsContainer.innerHTML = `
                    <div class="expert-card" style="display: flex; justify-content: center; align-items: center; height: 150px;">
                        <div style="text-align: center;">
                            <div style="margin-bottom: 8px;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto;">
                                    <line x1="12" y1="2" x2="12" y2="6"></line>
                                    <line x1="12" y1="18" x2="12" y2="22"></line>
                                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                    <line x1="2" y1="12" x2="6" y2="12"></line>
                                    <line x1="18" y1="12" x2="22" y2="12"></line>
                                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                </svg>
                            </div>
                            <span>Chargement des experts...</span>
                        </div>
                    </div>
                `;
                
                try {
                    // Get mock experts
                    const experts = footballApi.getMockExperts();
                    appState.experts = experts;
                    
                    // Render experts
                    this.renderExperts();
                } catch (error) {
                    console.error('Error loading experts:', error);
                    expertsContainer.innerHTML = `
                        <div class="expert-card">
                            <div style="text-align: center; padding: 20px;">
                                <p>Erreur lors du chargement des experts.</p>
                                <button class="btn btn-primary mt-4" onclick="UI.loadExperts()">Réessayer</button>
                            </div>
                        </div>
                    `;
                }
            },
            
            // Render experts in the UI
            renderExperts() {
                const expertsContainer = document.getElementById('experts-container');
                if (!expertsContainer) return;
                
                expertsContainer.innerHTML = '';
                
                if (appState.experts.length === 0) {
                    expertsContainer.innerHTML = `
                        <div class="expert-card">
                            <div style="text-align: center; padding: 20px;">
                                <p>Aucun expert trouvé.</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                // Get expert card template
                const template = document.getElementById('expert-card-template');
                if (!template) return;
                
                // Render each expert
                appState.experts.forEach((expert, index) => {
                    const card = template.content.cloneNode(true);
                    
                    // Expert info
                    const expertName = card.querySelector('.expert-name');
                    const expertTitle = card.querySelector('.expert-title');
                    const expertAvatar = card.querySelector('.expert-avatar');
                    const expertStatus = card.querySelector('.expert-status');
                    const expertSuccess = card.querySelector('.expert-success');
                    
                    expertName.textContent = expert.name;
                    expertTitle.textContent = expert.title;
                    expertAvatar.textContent = expert.avatar;
                    expertAvatar.style.backgroundColor = expert.avatarColor;
                    
                    if (expert.online) {
                        expertStatus.style.backgroundColor = 'var(--color-safe)';
                    } else {
                        expertStatus.style.backgroundColor = 'var(--color-gray-400)';
                    }
                    
                    expertSuccess.innerHTML = `
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 4px;">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        ${expert.successRate}%
                    `;
                    
                    // Pick details
                    const pickTitle = card.querySelector('.pick-title');
                    const pickOdds = card.querySelector('.pick-odds');
                    const pickMeta = card.querySelector('.pick-meta');
                    const pickAnalysis = card.querySelector('.pick-analysis');
                    const confidenceValue = card.querySelector('.confidence-value');
                    const confidenceBar = card.querySelector('.confidence-bar');
                    
                    pickTitle.textContent = expert.pick.title;
                    pickOdds.textContent = expert.pick.odds;
                    pickMeta.textContent = expert.pick.meta;
                    pickAnalysis.textContent = expert.pick.analysis;
                    confidenceValue.textContent = `${expert.pick.confidence}%`;
                    confidenceBar.setAttribute('data-width', expert.pick.confidence);
                    
                    // Stats
                    const followers = card.querySelector('.stat-value.followers');
                    const comments = card.querySelector('.stat-value.comments');
                    const shares = card.querySelector('.stat-value.shares');
                    
                    followers.textContent = expert.followers;
                    comments.textContent = expert.comments;
                    shares.textContent = expert.shares;
                    
                    // Follow button
                    const followBtn = card.querySelector('.btn-follow');
                    followBtn.textContent = expert.isFollowing ? 'Ne plus suivre' : 'Suivre';
                    followBtn.addEventListener('click', () => {
                        expert.isFollowing = !expert.isFollowing;
                        followBtn.textContent = expert.isFollowing ? 'Ne plus suivre' : 'Suivre';
                        
                        showToast(expert.isFollowing ? 
                            `Vous suivez maintenant ${expert.name}` : 
                            `Vous ne suivez plus ${expert.name}`
                        );
                    });
                    
                    // Add animation delay
                    const expertCard = card.querySelector('.expert-card');
                    expertCard.style.animationDelay = `${index * 0.1 + 0.3}s`;
                    expertCard.classList.add('animate-slide-up');
                    
                    expertsContainer.appendChild(card);
                });
                
                // Animate confidence bars
                setTimeout(() => {
                    const confidenceBars = document.querySelectorAll('.confidence-bar');
                    confidenceBars.forEach(bar => {
                        const width = bar.getAttribute('data-width');
                        bar.style.width = `${width}%`;
                    });
                }, 500);
            },
            
            // Load leagues data
            loadLeagues() {
                const leaguesContainer = document.getElementById('leagues-container');
                if (!leaguesContainer) return;
                
                // Clear container
                leaguesContainer.innerHTML = '';
                
                try {
                    // Get mock leagues
                    const leagues = footballApi.getMockLeagues();
                    appState.leagues = leagues;
                    
                    // Render leagues
                    this.renderLeagues();
                } catch (error) {
                    console.error('Error loading leagues:', error);
                    leaguesContainer.innerHTML = `
                        <div class="league-card">
                            <div style="text-align: center; padding: 20px;">
                                <p>Erreur lors du chargement des championnats.</p>
                            </div>
                        </div>
                    `;
                }
            },
            
            // Render leagues in the UI
            renderLeagues() {
                const leaguesContainer = document.getElementById('leagues-container');
                if (!leaguesContainer) return;
                
                if (appState.leagues.length === 0) {
                    leaguesContainer.innerHTML = `
                        <div class="league-card">
                            <div style="text-align: center; padding: 20px;">
                                <p>Aucun championnat trouvé.</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                // Get league card template
                const template = document.getElementById('league-card-template');
                if (!template) return;
                
                // Render each league
                appState.leagues.forEach((league, index) => {
                    const card = template.content.cloneNode(true);
                    
                    // League info
                    const leagueName = card.querySelector('.league-name');
                    const leagueCountry = card.querySelector('.league-country');
                    const leagueAbbr = card.querySelector('.league-abbr');
                    const leagueLogo = card.querySelector('.league-logo');
                    const matchesCount = card.querySelector('.matches-count');
                    
                    leagueName.textContent = league.name;
                    leagueCountry.textContent = league.country;
                    leagueAbbr.textContent = league.id;
                    leagueLogo.style.backgroundColor = leagueColors[league.id] || '#4338ca';
                    
                    // Set matches count based on the current tab
                    let count = 0;
                    switch(appState.currentTab) {
                        case 'safe': count = 1; break;
                        case 'fun': count = 2; break;
                        case 'risk': count = 3; break;
                        default: count = 1;
                    }
                    matchesCount.textContent = count;
                    
                    // Add animation delay
                    const leagueCard = card.querySelector('.league-card');
                    leagueCard.style.animationDelay = `${index * 0.1 + 0.5}s`;
                    leagueCard.classList.add('animate-slide-up');
                    
                    leaguesContainer.appendChild(card);
                });
            }
        };
        
        // ==================== APP INITIALIZATION ==================== //
        
        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved settings if available
            const savedSettings = localStorage.getItem('settings');
            if (savedSettings) {
                try {
                    appState.settings = { ...appState.settings, ...JSON.parse(savedSettings) };
                } catch (error) {
                    console.error('Error parsing saved settings', error);
                }
            }
            
            // Apply dark mode
            if (appState.settings.darkMode) {
                document.body.classList.add('dark');
            } else {
                document.body.classList.remove('dark');
            }
            
            // Initialize UI
            UI.init();
        });
    </script>
</body>
</html>
